{% load static %}
{% load text_utils %}

<div id="featured-articles">
    <div class="flex flex-wrap md:flex-no-wrap space-x-0 md:space-x-6 mb-16x">
        <!-- main post -->
        <div class="mb-4 lg:mb-0 p-4 lg:p-0 w-full md:w-4/7 rounded-md block">
            <a href="{{ lead_article.url }}" target="_blank" title="{{ article.title }}">
                <div class="overflow-hidden cursor-pointer shadow-md h-64 rounded">
                    <img src="{{ lead_article.image_url }}"
                        class="block rounded-md object-cover object-center w-full h-full shadow-lg shadow object-cover object-center transition transform duration-500 ease-in-out hover:transition hover:scale-110">
                </div>
            </a>
            <h1 class="text-gray-800 text-4xl font-bold mt-2 mb-4 leading-tight">
                <a href="{{ lead_article.url }}" target="_blank">{{ lead_article.title }}</a>
            </h1>
            <div class="flex justify-between">
                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100
                                text-blue-800 mb-2"> {{ lead_article.source.name }} </span>
                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100
                                text-gray-600 mb-2 py-1x px-4x">
                    {{ lead_article.published_at|date:"M j, Y"}} </span>
            </div>
            <p class="text-gray-600 mb-4 mt-4">
                {{ lead_article.description |truncatechars:300}}
            </p>
        </div>

        <!-- sub-main posts -->
        <div class="w-full md:w-4/7 md:max-w-md p-4 lg:p-0">
            {% for article in featured_articles %}
            <div class="rounded w-full flex flex-col md:flex-row mb-10">
                <a class="h-64 md:h-40 md:w-1/2 overflow-hidden shadow-md rounded" href="{{ article.url }}" target="_blank"
                    title="{{ article.title }}">
                    <img src="{{ article.image_url }}" class="block rounded-md
                                md:m-0 object-cover object-center h-full w-full transition transform duration-500
                                ease-in-out hover:transition hover:scale-110" />
                </a>
                <div class="md:w-1/2 bg-white rounded py-4 md:px-4 md:py-0">
                    <a href="{{ article.url }}" target="_blank">
                        <div
                            class="md:mt-0 text-gray-800 text-lg mb-2 font-bold text-2xl md:mt-0 md:font-semibold md:text-lg">
                            {% truncate_in_middle article.title 70 %}
                        </div>
                    </a>
                    <div class="flex flex-wrap justify-between">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100
                                text-blue-800 mb-2"> {{ article.source.name }} </span>
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100
                                text-gray-600 mb-2 py-1x px-4x">
                            {{ article.published_at|date:"M j, Y"}} </span>
                    </div>
                    <p class="block md:hidden p-2 pl-0 pt-1 text-gray-600">
                        {{ article.description|truncatechars:200 }}
                    </p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>